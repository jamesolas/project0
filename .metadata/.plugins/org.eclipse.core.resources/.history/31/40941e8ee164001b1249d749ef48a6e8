package com.app.main;

import java.util.Scanner;

import org.apache.log4j.Logger;

import com.app.exception.BusinessException;
import com.app.model.User;
import com.app.service.UserService;
import com.app.service.impl.UserServiceImpl;

public class Main {
	
	
	private static Logger log = Logger.getLogger(Main.class);

	public static void main(String[] args) {
		
		UserService userService = new UserServiceImpl();
		
		//setting up scanner
		Scanner scanner = new Scanner(System.in);
		
		//instantiating class variables
		String firstName = "";
		String lastName = "";
		String email = "";
		String password = "";
		int userId = 0;
		User userLogin = null;
		String type = "";

		
		log.info("Welcome to the Car App.");
		
		//instantiate variable for menu options
		int menu1 = 0;
		
		
		//set up do while loop for menu 1
		do {
			log.info("1) Log In");
			log.info("2) Register for a new account.");

			//asking user for information
			try {
				menu1 = scanner.nextInt();
				scanner.nextLine();
			}catch(NumberFormatException e) {
			}
			
			switch(menu1) {
			case 1: log.info("Log In");
			
					while(email.length() <= 0) {
					log.info("Please enter your email address.");
					email = scanner.nextLine();
					}
					while(password.length() <= 0) {
					log.info("Please enter your password.");
					password = scanner.nextLine();
					}
				
				try {
					userLogin = userService.logIn(email, password);
				} catch (BusinessException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
				
				try {
					type = userService.findType(email);
				} catch (BusinessException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
				
				log.info(type);
				
				try {
					userId = userService.findUserId(email);
				} catch (BusinessException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}
				
				log.info(userId);
				
				if(type == "customer") {
					log.info("customer");
					
					int menu2 = 0;
					do {
						log.info("Employee Menu");
						log.info("1)Add a car");
						log.info("2)Remove a car");
						log.info("3)View offers");
						log.info("4)Accept an offer");
						log.info("5)Reject an offer");
						log.info("6)View payments");
						
						try {
						menu2 = scanner.nextInt();
						scanner.nextLine();
						}catch(NumberFormatException e) {		
						}
						
						
						
					}while(menu2 != 7);
					
				}else {
					log.info("employee");
				}
			
			break;
			case 2: log.info("Create a new account.");
					
						while(firstName.length() <= 0 || firstName == null) {
							log.info("Please enter your first name.");
							firstName = scanner.nextLine();
							
						}
					
						while(lastName.length() <= 0) {
							log.info("Please enter your last name.");
							lastName = scanner.nextLine();
						}
					
						while(email == null) {
							log.info("Please enter your email address.");
							email = scanner.nextLine();
						}
					
						while(password == null) {
							log.info("Please enter a new password.");
							password = scanner.nextLine();
						}
						
						try {
							User newUser = userService.createAccount(firstName, lastName, email, password);
						} catch (BusinessException e) {
							// TODO Auto-generated catch block
							e.printStackTrace();
						}
					
			break;
			default:log.info("Invalid option");
			}
			
			
			
			
				
		}while(menu1 != 3);
}
}